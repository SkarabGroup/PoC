import { Repository } from '../types';

export const mockRepositories: Repository[] = [
  {
    id: '1',
    name: 'skarab-frontend',
    description: 'Frontend application per il progetto Skarab Group utilizzando React e TypeScript',
    totalAnalyses: 12,
    lastAnalysis: {
      id: 'analysis-1',
      date: '2025-12-08T10:30:00',
      status: 'completed',
      report: {
        qualityScore: 85,
        securityScore: 78,
        performanceScore: 92,
        criticalIssues: 2,
        warningIssues: 8,
        infoIssues: 15,
        qualityIssues: [
          {
            title: 'Codice duplicato rilevato',
            description: 'Sono state trovate sezioni di codice duplicate in più file. Considera il refactoring in una funzione condivisa.',
            severity: 'warning',
            file: 'src/components/Dashboard.tsx',
            line: 45,
          },
          {
            title: 'Complessità ciclomatica elevata',
            description: 'La funzione handleSubmit ha una complessità ciclomatica di 15, che supera il limite raccomandato di 10.',
            severity: 'warning',
            file: 'src/utils/validation.ts',
            line: 120,
          },
        ],
        securityIssues: [
          {
            title: 'SQL Injection potenziale',
            description: 'Query SQL costruita con concatenazione di stringhe. Utilizza prepared statements.',
            severity: 'critical',
            file: 'src/api/database.ts',
            line: 78,
          },
          {
            title: 'XSS vulnerability',
            description: 'Input utente non sanitizzato inserito direttamente nel DOM.',
            severity: 'critical',
            file: 'src/components/UserProfile.tsx',
            line: 156,
          },
        ],
        bugIssues: [
          {
            title: 'Possibile null pointer exception',
            description: 'La variabile user potrebbe essere undefined quando viene utilizzata.',
            severity: 'warning',
            file: 'src/pages/Profile.tsx',
            line: 89,
          },
        ],
        remediations: [
          {
            id: 'rem-1',
            title: 'Sanitizza input utente per prevenire XSS',
            description: 'L\'input dell\'utente viene inserito direttamente nel DOM senza sanitizzazione, creando una vulnerabilità XSS.',
            severity: 'critical',
            category: 'Sicurezza',
            file: 'src/components/UserProfile.tsx',
            line: 156,
            currentCode: `<div dangerouslySetInnerHTML={{ __html: userInput }} />`,
            suggestedCode: `import DOMPurify from 'dompurify';\n\n<div dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(userInput) }} />`,
            reason: 'L\'utilizzo di DOMPurify previene l\'esecuzione di script malevoli inseriti dagli utenti, proteggendo l\'applicazione da attacchi XSS.',
          },
          {
            id: 'rem-2',
            title: 'Utilizza prepared statements per query SQL',
            description: 'La query SQL viene costruita concatenando stringhe, rendendola vulnerabile a SQL injection.',
            severity: 'critical',
            category: 'Sicurezza',
            file: 'src/api/database.ts',
            line: 78,
            currentCode: `const query = "SELECT * FROM users WHERE id = '" + userId + "'";`,
            suggestedCode: `const query = "SELECT * FROM users WHERE id = ?";\nconst result = await db.execute(query, [userId]);`,
            reason: 'I prepared statements separano il codice SQL dai dati, impedendo agli attaccanti di iniettare codice SQL malevolo.',
          },
          {
            id: 'rem-3',
            title: 'Aggiungi controllo null per evitare errori',
            description: 'La variabile user potrebbe essere undefined, causando errori runtime.',
            severity: 'warning',
            category: 'Qualità del Codice',
            file: 'src/pages/Profile.tsx',
            line: 89,
            currentCode: `const userName = user.name;`,
            suggestedCode: `const userName = user?.name || 'Unknown';`,
            reason: 'L\'operatore optional chaining (?.) previene errori quando user è undefined, migliorando la robustezza del codice.',
          },
          {
            id: 'rem-4',
            title: 'Riduci complessità della funzione',
            description: 'La funzione ha una complessità ciclomatica troppo elevata, rendendola difficile da mantenere e testare.',
            severity: 'warning',
            category: 'Qualità del Codice',
            file: 'src/utils/validation.ts',
            line: 120,
            currentCode: `function handleSubmit(data) {\n  if (condition1) {\n    if (condition2) {\n      // ... molti if annidati\n    }\n  }\n}`,
            suggestedCode: `function handleSubmit(data) {\n  if (!validateBasic(data)) return;\n  if (!validateAdvanced(data)) return;\n  processData(data);\n}\n\nfunction validateBasic(data) { ... }\nfunction validateAdvanced(data) { ... }`,
            reason: 'Suddividere la funzione in parti più piccole migliora la leggibilità, facilita i test e riduce la complessità.',
          },
        ],
      },
    },
    analysisHistory: [
      {
        id: 'history-1',
        date: '2025-12-08T10:30:00',
        status: 'completed',
        report: {
          qualityScore: 85,
          securityScore: 78,
          performanceScore: 92,
          criticalIssues: 2,
          warningIssues: 8,
          infoIssues: 15,
          qualityIssues: [],
          securityIssues: [],
          bugIssues: [],
          remediations: [],
        },
      },
      {
        id: 'history-2',
        date: '2025-12-07T15:20:00',
        status: 'completed',
        report: {
          qualityScore: 80,
          securityScore: 81,
          performanceScore: 92,
          criticalIssues: 3,
          warningIssues: 10,
          infoIssues: 12,
          qualityIssues: [],
          securityIssues: [],
          bugIssues: [],
          remediations: [],
        },
      },
      {
        id: 'history-3',
        date: '2025-12-06T09:15:00',
        status: 'completed',
        report: {
          qualityScore: 78,
          securityScore: 75,
          performanceScore: 90,
          criticalIssues: 4,
          warningIssues: 12,
          infoIssues: 18,
          qualityIssues: [],
          securityIssues: [],
          bugIssues: [],
          remediations: [],
        },
      },
      {
        id: 'history-4',
        date: '2025-12-05T14:45:00',
        status: 'failed',
      },
      {
        id: 'history-5',
        date: '2025-12-04T11:30:00',
        status: 'completed',
        report: {
          qualityScore: 82,
          securityScore: 80,
          performanceScore: 88,
          criticalIssues: 2,
          warningIssues: 9,
          infoIssues: 14,
          qualityIssues: [],
          securityIssues: [],
          bugIssues: [],
          remediations: [],
        },
      },
    ],
  },
  {
    id: '2',
    name: 'skarab-backend',
    description: 'API backend e orchestratore per il sistema Code Guardian con integrazione agenti AI',
    totalAnalyses: 8,
    lastAnalysis: {
      id: 'analysis-2',
      date: '2025-12-07T16:45:00',
      status: 'completed',
      report: {
        qualityScore: 92,
        securityScore: 88,
        performanceScore: 85,
        criticalIssues: 1,
        warningIssues: 5,
        infoIssues: 10,
        qualityIssues: [],
        securityIssues: [],
        bugIssues: [],
        remediations: [],
      },
    },
    analysisHistory: [
      {
        id: 'history-b-1',
        date: '2025-12-07T16:45:00',
        status: 'completed',
        report: {
          qualityScore: 92,
          securityScore: 88,
          performanceScore: 85,
          criticalIssues: 1,
          warningIssues: 5,
          infoIssues: 10,
          qualityIssues: [],
          securityIssues: [],
          bugIssues: [],
          remediations: [],
        },
      },
      {
        id: 'history-b-2',
        date: '2025-12-06T13:20:00',
        status: 'completed',
        report: {
          qualityScore: 90,
          securityScore: 85,
          performanceScore: 83,
          criticalIssues: 2,
          warningIssues: 6,
          infoIssues: 12,
          qualityIssues: [],
          securityIssues: [],
          bugIssues: [],
          remediations: [],
        },
      },
    ],
  },
  {
    id: '3',
    name: 'code-guardian-agents',
    description: 'Sistema di agenti AI specializzati per analisi di codice, sicurezza OWASP e quality assurance',
    totalAnalyses: 15,
    lastAnalysis: {
      id: 'analysis-3',
      date: '2025-12-08T08:15:00',
      status: 'in-progress',
    },
    analysisHistory: [],
  },
  {
    id: '4',
    name: 'skarab-docs',
    description: 'Documentazione tecnica e guide utente per la piattaforma Code Guardian',
    totalAnalyses: 3,
    lastAnalysis: {
      id: 'analysis-4',
      date: '2025-12-05T10:00:00',
      status: 'completed',
      report: {
        qualityScore: 95,
        securityScore: 100,
        performanceScore: 98,
        criticalIssues: 0,
        warningIssues: 2,
        infoIssues: 5,
        qualityIssues: [],
        securityIssues: [],
        bugIssues: [],
        remediations: [],
      },
    },
    analysisHistory: [],
  },
  {
    id: '5',
    name: 'skarab-mobile',
    description: 'Applicazione mobile React Native per monitoraggio analisi in tempo reale',
    totalAnalyses: 0,
    lastAnalysis: {
      id: 'analysis-5',
      date: '2025-11-29T12:00:00',
      status: 'not-analyzed',
    },
    analysisHistory: [],
  },
];
